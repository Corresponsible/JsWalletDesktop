// Generated by LiveScript 1.6.0
(function(){
  var react, getPrimaryInfo, getLang, icon, icons, sendFuncs, trxFee;
  react = require('react');
  getPrimaryInfo = require('../get-primary-info.ls');
  getLang = require('../get-lang.ls');
  icon = require('../pages/icon.ls');
  icons = require('../icons.ls');
  sendFuncs = require('../send-funcs.ls');
  trxFee = function(arg$){
    var store, web3t, wallet, style, lang, send, activeCheap, activeCustom, activeAuto, activeClass, ref$, chooseCheap, chooseCustom, chooseAuto, selectCustom, onFeeChange, feeCurrency, borderStyle, text, inputStyle, customFeeValue, cheapOption, customOption, autoOption, children;
    store = arg$.store, web3t = arg$.web3t, wallet = arg$.wallet;
    style = getPrimaryInfo(store);
    lang = getLang(store);
    send = store.current.send;
    activeCheap = send.feeType === 'cheap';
    activeCustom = send.feeType === 'custom';
    activeAuto = send.feeType === 'auto';
    activeClass = function(feeType){
      if (feeType !== send.feeType) {
        return null;
      }
      return 'active';
    };
    ref$ = sendFuncs(store, web3t), chooseCheap = ref$.chooseCheap, chooseCustom = ref$.chooseCustom, chooseAuto = ref$.chooseAuto;
    selectCustom = function(){
      return chooseCustom(send.amountSendFee);
    };
    onFeeChange = function(ev){
      var value;
      value = ev.target.value;
      if (value.split('.').length > 2) {
        value = "0";
      }
      if (/[^\.0-9]/.test(value)) {
        value = "0";
      }
      if (value === "") {
        value = "0";
      }
      if (value.startsWith("0") && value.indexOf('.' === -1) && value.length > 1) {
        value = value.substr(1);
      }
      if (value.startsWith('.')) {
        value = "0" + value;
      }
      return chooseCustom(value);
    };
    feeCurrency = (ref$ = wallet.network.txFeeIn) != null
      ? ref$
      : send.coin.token;
    borderStyle = {
      border: "1px solid " + style.app.border
    };
    text = {
      color: style.app.icon + ""
    };
    inputStyle = {
      background: style.app.input,
      border: "1px solid " + style.app.border,
      color: style.app.text
    };
    customFeeValue = function(){
      if (activeCustom) {
        return send.feeCustomAmount;
      } else {
        return send.amountSendFee;
      }
    };
    cheapOption = function(){
      var children;
      if (!send.amountSendFeeOptions.cheap) {
        return null;
      }
      if (send.amountSendFeeOptions.cheap > send.amountSendFeeOptions.auto) {
        return null;
      }
      return react.createElement('td', {
        onClick: chooseCheap,
        className: activeClass('cheap') + ""
      }, children = [
        react.createElement('div', {
          className: 'field type'
        }, ' ' + lang.cheap), react.createElement('div', {
          className: 'field coin'
        }, ' ' + (send.amountSendFeeOptions.cheap ? send.amountSendFeeOptions.cheap + " " + feeCurrency : ""))
      ]);
    };
    customOption = function(){
      var children;
      return react.createElement('td', {
        onClick: selectCustom,
        className: activeClass('custom') + ""
      }, children = [
        react.createElement('div', {
          className: 'field type'
        }, ' ' + lang.custom), react.createElement('div', {
          className: 'field coin'
        }, ' ' + customFeeValue() + " " + feeCurrency)
      ]);
    };
    autoOption = function(){
      var children;
      return react.createElement('td', {
        onClick: chooseAuto,
        className: activeClass('auto') + ""
      }, children = [
        react.createElement('div', {
          className: 'field type'
        }, ' ' + lang.auto), react.createElement('div', {
          className: 'field coin'
        }, ' ' + (send.amountSendFeeOptions.auto ? send.amountSendFeeOptions.auto + " " + feeCurrency : ""))
      ]);
    };
    return react.createElement('div', {
      className: 'trx-fee trx-fee1751710292'
    }, children = [
      react.createElement('label', {
        style: text
      }, ' Transaction Fee'), react.createElement('table', {
        style: borderStyle,
        className: 'fee'
      }, children = react.createElement('tbody', {}, children = react.createElement('tr', {}, children = [cheapOption(), customOption(), autoOption()]))), store.current.send.feeType === 'custom' ? react.createElement('input', {
        type: 'text',
        style: inputStyle,
        onChange: onFeeChange,
        placeholder: "0",
        title: "Fee",
        value: send.feeCustomAmount + "",
        className: 'amount'
      }) : void 8
    ]);
  };
  module.exports = trxFee;
}).call(this);
