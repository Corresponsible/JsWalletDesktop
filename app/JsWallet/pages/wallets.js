// Generated by LiveScript 1.6.0
(function(){
  var react, seedmem, web3, getLang, getPrimaryInfo, desktop, mobile, signTransaction, wallets, choise, toString$ = {}.toString;
  react = require('react');
  seedmem = require('../seed.js');
  web3 = require('../web3.js');
  getLang = require('../get-lang.js');
  getPrimaryInfo = require('../get-primary-info.js');
  desktop = require('./wallets-desktop.js');
  mobile = require('./wallets-mobile.js');
  signTransaction = require('../components/sign-transaction.js');
  wallets = function(arg$){
    var store, web3t, func;
    store = arg$.store, web3t = arg$.web3t;
    func = choise[store.current.device];
    if (toString$.call(func).slice(8, -1) !== 'Function') {
      return null;
    }
    return signTransaction({
      store: store,
      web3t: web3t
    }) || func({
      store: store,
      web3t: web3t
    });
  };
  wallets.init = function(arg$, cb){
    var store, web3t, ref$, ref1$;
    store = arg$.store, web3t = arg$.web3t;
    if ((ref$ = store.current.send) != null) {
      delete ref$.wallet;
    }
    if ((ref1$ = store.current.send) != null) {
      ref1$.txType = 'regular';
    }
    store.current.send.swap = false;
    store.current.send.chosenNetwork = null;
    if (store.current.account != null) {
      return cb(null);
    }
    seedmem.mnemonic = seedmem.get();
    return web3t.init(function(err){
      cb(null);
      return setImmediate(function(){
        if (store.urlHashParams.page != null) {
          return store.current.page = store.urlHashParams.page;
        }
      });
    });
  };
  wallets.focus = function(arg$, cb){
    var store, web3t;
    store = arg$.store, web3t = arg$.web3t;
    return web3t.refresh(function(err){
      return cb(err);
    });
  };
  choise = {
    mobile: mobile,
    desktop: desktop
  };
  module.exports = wallets;
}).call(this);
